---
wave: 2
depends_on:
  - "06-02"
files_modified:
  - package.json
autonomous: true
---

# Plan 06-03: Remove Legacy npm Dependencies

## Objective

Remove the old provider SDK packages from package.json. After deleting the legacy code (Plan 06-02), these dependencies are no longer needed and their removal will reduce bundle size and attack surface.

## Requirements Addressed

- INFRA-03: Old provider SDK dependencies removed (openai, @deepgram/sdk)

## Tasks

<task id="1" title="Remove openai package">
Remove the OpenAI SDK from dependencies:

```bash
npm uninstall openai
```

This package was used by conversation.ts (now deleted).
</task>

<task id="2" title="Remove @deepgram/sdk package">
Remove the Deepgram SDK from dependencies:

```bash
npm uninstall @deepgram/sdk
```

This package was used by stt.ts (now deleted).
</task>

<task id="3" title="Verify package.json updated" depends_on="1,2">
Check that package.json no longer contains old dependencies:

```bash
cat package.json | grep -E "(openai|deepgram)"
```

Expected: No matches.

Also verify the description is updated to reflect AWS services:

Update package.json description from:
```json
"description": "AI-powered voice bot agent for barber shop reception — handles inbound/outbound calls via Twilio, Deepgram STT, OpenAI LLM, and ElevenLabs TTS"
```

To:
```json
"description": "AI-powered voice bot agent for barber shop reception — handles inbound/outbound calls via Twilio, AWS Transcribe STT, AWS Bedrock LLM, and AWS Polly TTS"
```
</task>

<task id="4" title="Clean install and verify" depends_on="3">
Run a clean install to verify dependencies are correct:

```bash
rm -rf node_modules
npm install
```

Then verify compilation:

```bash
npx tsc --noEmit
```

Expected: No errors.
</task>

<task id="5" title="Run test suite" depends_on="4">
Run all tests to verify nothing broke:

```bash
npm test
```

Expected: All tests pass.
</task>

## Verification

- [ ] openai removed from package.json
- [ ] @deepgram/sdk removed from package.json
- [ ] package.json description updated to mention AWS services
- [ ] `npm install` succeeds
- [ ] TypeScript compiles: `npx tsc --noEmit`
- [ ] All tests pass: `npm test`

## must_haves

- [ ] Remove openai package
- [ ] Remove @deepgram/sdk package
- [ ] Update package.json description
- [ ] Clean install and compilation succeeds
